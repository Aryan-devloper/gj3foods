{% include 'super_admin/super_sidebar.html' %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Super Admin Registration</title>

<!-- Google Fonts + Font Awesome -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
body {
    font-family: 'Poppins', sans-serif;
    background-color: #f4f6f9;
    margin: 0;
    display: flex;
    min-height: 100vh;
}
.content-wrapper {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    margin-left: 250px;
}
.register-container {
    background-color: #fff;
    padding: 40px 35px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 650px;
    text-align: center;
}
h2 {
    color: #34495e;
    margin-bottom: 30px;
    font-weight: 700;
}
.form-row {
    display: flex;
    gap: 20px;
    margin-bottom: 18px;
}
.form-field {
    flex: 1;
    text-align: left;
    position: relative;
}
form label {
    display: block;
    margin-bottom: 6px;
    color: #555;
    font-weight: 600;
}
.input-group {
    position: relative;
}
form input,
form select,
form textarea {
    width: 100%;
    padding: 10px 42px 10px 12px; /* space for icon */
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 0.95rem;
    transition: border-color 0.3s ease;
    box-sizing: border-box;
}
form input:focus,
form select:focus,
form textarea:focus {
    border-color: #f97316;
    outline: none;
}
.input-group i {
    position: absolute;
    right: 14px;
    top: 50%;
    transform: translateY(-50%);
    color: #f97316;
    font-size: 1.1rem;
    pointer-events: none; /* prevents blocking clicks inside inputs */
}
textarea {
    resize: vertical;
    min-height: 60px;
}
button[type="submit"] {
    background-color: #f97316;
    color: white;
    padding: 13px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    font-size: 1rem;
    margin-top: 25px;
    width: 100%;
    transition: background-color 0.3s ease;
}
button[type="submit"]:hover {
    background-color: #e06000;
}
.errorlist {
    color: #e74c3c;
    margin-top: 5px;
    font-size: 0.85rem;
}
.login-link {
    margin-top: 25px;
    font-size: 0.9rem;
    color: #666;
}
.login-link a {
    color: #f97316;
    font-weight: 600;
    text-decoration: none;
}
.login-link a:hover {
    text-decoration: underline;
}

/* File input styling */
.file-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 5px;
}
input[type="file"] {
    opacity: 0;
    position: absolute;
    z-index: 1;
    width: 150px;
    height: 38px;
    cursor: pointer;
}
.custom-file-label {
    background-color: #f97316;
    color: #fff;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: background-color 0.3s;
}
.custom-file-label:hover {
    background-color: #e06000;
}
.file-name {
    color: #555;
    font-size: 0.9rem;
}
.image-preview img {
    margin-top: 10px;
    max-width: 120px;
    border-radius: 8px;
    border: 1px solid #ccc;
    display: block;
}
@media (max-width: 700px) {
    .form-row { flex-direction: column; }
    .content-wrapper { margin-left: 0; padding: 15px; }
}
</style>
</head>

<body>
<div class="content-wrapper">
<div class="register-container">
<h2>Super Admin Registration</h2>

<form method="POST" enctype="multipart/form-data">
{% csrf_token %}

<!-- Full Name & Email -->
<div class="form-row">
  <div class="form-field">
    <label for="{{ form.full_name.id_for_label }}">Full Name</label>
    <div class="input-group">
      {{ form.full_name }}
      <i class="fa-solid fa-user"></i>
    </div>
    {{ form.full_name.errors }}
  </div>

  <div class="form-field">
    <label for="{{ form.email.id_for_label }}">Email</label>
    <div class="input-group">
      {{ form.email }}
      <i class="fa-solid fa-envelope"></i>
    </div>
    {{ form.email.errors }}
  </div>
</div>

<!-- Phone & Role -->
<div class="form-row">
  <div class="form-field">
    <label for="{{ form.phone.id_for_label }}">Phone</label>
    <div class="input-group">
      {{ form.phone }}
      <i class="fa-solid fa-phone"></i>
    </div>
    {{ form.phone.errors }}
  </div>

  <div class="form-field">
    <label for="{{ form.role.id_for_label }}">Role</label>
    <div class="input-group">
      {{ form.role }}
      <i class="fa-solid fa-user-shield"></i>
    </div>
    {{ form.role.errors }}
  </div>
</div>

<!-- Address -->
<div class="form-field">
  <label for="{{ form.address.id_for_label }}">Address</label>
  <div class="input-group">
    {{ form.address }}
    <i class="fa-solid fa-location-dot"></i>
  </div>
  {{ form.address.errors }}
</div>

<!-- Password & Confirm -->
<div class="form-row">
  <div class="form-field">
    <label for="{{ form.password.id_for_label }}">Password</label>
    <div class="input-group">
      {{ form.password }}
      <i class="fa-solid fa-lock"></i>
    </div>
    {{ form.password.errors }}
  </div>

  <div class="form-field">
    <label for="{{ form.confirm_password.id_for_label }}">Confirm Password</label>
    <div class="input-group">
      {{ form.confirm_password }}
      <i class="fa-solid fa-lock"></i>
    </div>
    {{ form.confirm_password.errors }}
  </div>
</div>

<!-- Profile Image -->
<div class="form-field">
  <label for="{{ form.profile_img.id_for_label }}">Profile Image</label>
  <div class="file-input-wrapper">
    {{ form.profile_img }}
    <label for="{{ form.profile_img.id_for_label }}" class="custom-file-label">
      <i class="fa-solid fa-upload"></i> Choose Image
    </label>
    <span id="file-name" class="file-name">No file chosen</span>
  </div>
  <div class="image-preview">
    <img id="preview" src="#" style="display:none;">
  </div>
  {{ form.profile_img.errors }}
</div>

<button type="submit">Register</button>
</form>

<p class="login-link">Already have an account? <a href="{% url 'super_login' %}">Login here</a></p>
</div>
</div>

<script>
const input = document.getElementById("{{ form.profile_img.id_for_label }}");
const preview = document.getElementById("preview");
const fileName = document.getElementById("file-name");

if (input) {
  input.addEventListener("change", function(event) {
    const file = event.target.files[0];
    if (file) {
      fileName.textContent = file.name;
      if (!file.type.startsWith("image/")) {
        alert("Please upload a valid image file");
        input.value = "";
        fileName.textContent = "No file chosen";
        preview.src = "#";
        preview.style.display = "none";
        return;
      }
      const reader = new FileReader();
      reader.onload = function(e) {
        preview.src = e.target.result;
        preview.style.display = "block";
      };
      reader.readAsDataURL(file);
    } else {
      fileName.textContent = "No file chosen";
      preview.src = "#";
      preview.style.display = "none";
    }
  });
}
</script>

</body>
</html>
